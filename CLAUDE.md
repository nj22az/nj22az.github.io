# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Commands

### Local Development
```bash
jekyll serve --livereload
```
Builds the site into `_site/` and serves it at `http://127.0.0.1:4000` with live reload.

### Publishing
```bash
git add -A
git commit -m "Describe your change"
git push origin main
```
GitHub Pages rebuilds automatically on push to main branch.

### Stop Development Server
```bash
# Standard stop
Ctrl+C

# Force stop if detached
pkill -f jekyll
```

## Architecture Overview

This is a hybrid Jekyll + React blog with an Apple-inspired glass aesthetic. The architecture combines static generation with a dynamic React frontend:

### Core Components

**Jekyll Backend (Static Generation)**
- Processes Markdown posts in `_posts/` into HTML and JSON feeds
- Generates `posts.json` consumed by React frontend
- Handles about page content via `about.md` → `about.json` transformation
- Uses Minima theme with custom Sass overrides in `assets/main.scss`

**React Frontend (Dynamic UI)**
- Single-page application loaded via `index.html`
- Main application logic in `main.js` (vanilla React via CDN)
- Consumes `posts.json`, `downloads.json`, and `about.json` for content
- Implements glass morphism design with backdrop filters and translucent cards
- Responsive navigation: sidebar on desktop, hamburger menu + bottom nav on mobile
- Pages: Home (infinite scroll feed), Journal (archive grid), Downloads, About (with parallax scrolling)

**Styling System**
- Primary styles in `styles.css` (Apple-inspired glass aesthetic)
- Jekyll Sass compilation via `assets/css/style.scss` entry point
- Modular Sass architecture in `_sass/` directory:
  - `base.scss` - foundational styles and reset
  - `layout.scss` - grid and layout utilities
  - `components.scss` - reusable component styles
  - `context-panel.scss` - specific panel styling
  - `typography.scss` - font and text styling
  - `utilities.scss` - helper classes
- Responsive design with mobile-first approach
- Dark mode support via CSS `prefers-color-scheme`

### Data Flow

1. Jekyll processes Markdown → generates JSON feeds
2. React app fetches JSON data on load
3. Enhanced post objects created with reading time, excerpts, and categorization
4. Dynamic rendering based on current view state (posts list, post detail, downloads, about)

### Content Management

**Blog Posts** (`_posts/YYYY-MM-DD-title.md`)
```yaml
---
layout: post
title: "Post Title"
date: YYYY-MM-DD
categories: [Category]
tags: [tag1, tag2]
content_type: "Type Label"
cover_icon: icon_id
thumbnail: /assets/images/thumbnail.jpg
---
```

**Icons** - Defined in `_data/icons.yml` with Lucide icon IDs organized by category:
- Writing & Content: `notebook-pen`, `text-quote`, `pencil`, `newspaper`
- Technology: `code`, `terminal`, `laptop`, `server`
- Travel & Location: `globe`, `map-pin`, `compass`, `plane`
- Documentation: `file-text`, `clipboard`, `folder`, `book`
- Communication: `message-circle`, `mail`, `microphone`, `headphones`
- Tools & Utilities: `wrench`, `settings`, `shield`, `key`
- Visual Content: `image`, `video`, `camera`, `brush`
- General: `home`, `alert-circle`, `badge-check`, `ruler`

Full list available in `_data/icons.yml` or via browser console as `window.blogIconCatalog`

**Downloads** - Managed via `downloads.json` with assets in `assets/downloads/`

## Key Files & Directories

```
_posts/                 # Markdown blog posts (Jekyll processes these)
_layouts/               # Jekyll layout templates
_includes/              # Reusable Jekyll template partials
_data/                  # Site data files (icons.yml, ui.yml)
_sass/                  # Modular Sass stylesheets
_plugins/               # Custom Jekyll plugins (if any)
assets/downloads/       # Downloadable files
assets/images/         # Static images
assets/css/style.scss  # Sass entry point for Jekyll compilation
main.js                # React application entry point
styles.css             # Primary CSS (glass aesthetic)
index.html             # SPA entry point, loads React
downloads.json         # Download metadata for React app
posts.json             # Auto-generated by Jekyll (do not edit manually)
about.json             # Auto-generated from about.md
```

## Development Notes

- Ruby 3.4.6+ required with Jekyll 4.4.1 and plugins (jekyll-feed, jekyll-seo-tag, jekyll-sitemap)
- No package.json - uses Jekyll for build, React via CDN
- Jekyll's `_site/` and `.jekyll-cache/` are git-ignored
- GitHub Pages handles deployment automatically
- Post images should go in `assets/images/posts/<post-slug>/`
- Use site-relative URLs (`/assets/...`) for cross-environment compatibility
- Jekyll processes Sass automatically: `_sass/` files compiled via `assets/css/style.scss`

## Content Guidelines

- Posts use `YYYY-MM-DD-slug.md` naming convention
- Reading time calculated automatically (200 words/minute)
- Excerpts auto-generated from content if not provided in front matter
- Cover icons must match IDs from `_data/icons.yml` (uses Lucide icon system)
- Tags and filtering fully implemented in React frontend
- Featured posts appear prominently on home page when `featured: true` is set

## React Component Structure

Key components in `main.js`:
- `App` - Main application shell with page routing and state management
- `PodcastSidebar` - Desktop sidebar navigation (Apple Podcasts style)
- `MobileHeader` - Mobile hamburger menu and header
- `BottomNavigation` - Mobile bottom navigation bar
- `InfiniteScrollFeed` - Home page with infinite scroll
- `JournalArchive` - Blog archive with sorting controls
- `PostDetailView` - Individual post view
- `AboutPageWithScroll` - About page with parallax effects
- `DownloadsPage` - Downloads listing with categorization
- `FilterMenu` - Search and filter controls for posts
- `ShareBar` - Social sharing and link copying
- `MonoIcon` - Icon wrapper component for Lucide icons

Keyboard shortcuts:
- `Cmd/Ctrl + K` - Focus search
- `Cmd/Ctrl + J` - Navigate to Journal
- `Cmd/Ctrl + D` - Navigate to Downloads
- `Cmd/Ctrl + H` - Navigate to Home
- `Cmd/Ctrl + ↑` - Scroll to top