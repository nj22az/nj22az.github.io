# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Commands

### Local Development
```bash
jekyll serve --livereload
```
Builds the site into `_site/` and serves it at `http://127.0.0.1:4000` with live reload.

### Publishing
```bash
git add -A
git commit -m "Describe your change"
git push origin main
```
GitHub Pages rebuilds automatically on push to main branch.

### Stop Development Server
```bash
# Standard stop
Ctrl+C

# Force stop if detached
pkill -f jekyll
```

## Architecture Overview

This is a hybrid Jekyll + React blog with an Apple-inspired glass aesthetic. The architecture combines static generation with a dynamic React frontend:

### Core Components

**Jekyll Backend (Static Generation)**
- Processes Markdown posts in `_posts/` into HTML and JSON feeds
- Generates `posts.json` consumed by React frontend
- Handles about page content via `about.md` → `about.json` transformation
- Uses Minima theme with custom Sass overrides in `assets/main.scss`

**React Frontend (Dynamic UI)**
- Single-page application loaded via `index.html`
- Main application logic in `main.js` (vanilla React via CDN)
- Consumes `posts.json`, `downloads.json`, and `about.json` for content
- Implements glass morphism design with backdrop filters and translucent cards

**Styling System**
- Primary styles in `styles.css` (Apple-inspired glass aesthetic)
- Jekyll theme overrides in `assets/main.scss` (Sass with design tokens)
- Responsive design with mobile-first approach
- Dark mode support via CSS `prefers-color-scheme`

### Data Flow

1. Jekyll processes Markdown → generates JSON feeds
2. React app fetches JSON data on load
3. Enhanced post objects created with reading time, excerpts, and categorization
4. Dynamic rendering based on current view state (posts list, post detail, downloads, about)

### Content Management

**Blog Posts** (`_posts/YYYY-MM-DD-title.md`)
```yaml
---
layout: post
title: "Post Title"
date: YYYY-MM-DD
categories: [Category]
tags: [tag1, tag2]
content_type: "Type Label"
cover_icon: icon_id
thumbnail: /assets/images/thumbnail.jpg
---
```

**Icons** - Defined in `_data/icons.yml` with 8 categories:
- `journal` - General reflections, meta posts
- `globe` - Cultural insights, travel notes
- `checklist` - Processes, runbooks, guides
- `wave` - Short dispatches, quick updates
- `compass` - Mission planning, strategy
- `toolkit` - Technical breakdowns, specs
- `antenna` - Network, communications, telemetry
- `safety` - Risk mitigation, safety briefings

**Downloads** - Managed via `downloads.json` with assets in `assets/downloads/`

## Key Files & Directories

```
_posts/                 # Markdown blog posts (Jekyll processes these)
_layouts/               # Jekyll layout templates
_data/icons.yml        # Icon definitions for post categories
assets/downloads/       # Downloadable files
assets/images/         # Static images
main.js                # React application entry point
styles.css             # Primary CSS (glass aesthetic)
assets/main.scss       # Jekyll/Sass theme overrides
index.html             # SPA entry point, loads React
downloads.json         # Download metadata for React app
posts.json             # Auto-generated by Jekyll (do not edit manually)
about.json             # Auto-generated from about.md
```

## Development Notes

- Ruby 3.4+ required (PATH configured in `~/.zshrc`)
- No package.json - uses Jekyll for build, React via CDN
- Jekyll's `_site/` and `.jekyll-cache/` are git-ignored
- GitHub Pages handles deployment automatically
- Post images should go in `assets/images/posts/<post-slug>/`
- Use site-relative URLs (`/assets/...`) for cross-environment compatibility

## Content Guidelines

- Posts use `YYYY-MM-DD-slug.md` naming convention
- Tags appear in UI but filtering not yet implemented
- Reading time calculated automatically (200 words/minute)
- Excerpts auto-generated from content if not provided in front matter
- Cover icons must match IDs from `_data/icons.yml`